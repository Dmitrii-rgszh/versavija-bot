#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª/–≥—Ä—É–ø–ø—É.
"""

import asyncio
from config import bot

# ID –≤–∞—à–µ–≥–æ –∫–∞–Ω–∞–ª–∞
CHAT_ID = -1002553563891  # Versavija_test_group

async def create_invite_link():
    """–°–æ–∑–¥–∞–µ—Ç –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –∫–∞–Ω–∞–ª–∞/–≥—Ä—É–ø–ø—ã"""
    try:
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
        invite_link = await bot.create_chat_invite_link(
            chat_id=CHAT_ID,
            name="–û—Å–Ω–æ–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è",  # –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
            expire_date=None,  # –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç
            member_limit=None,  # –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
            creates_join_request=False  # —Å—Ä–∞–∑—É –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞
        )
        
        print(f"\n{'='*60}")
        print(f"üîó –ü–†–ò–ì–õ–ê–°–ò–¢–ï–õ–¨–ù–ê–Ø –°–°–´–õ–ö–ê –°–û–ó–î–ê–ù–ê:")
        print(f"{'='*60}")
        print(f"–°—Å—ã–ª–∫–∞: {invite_link.invite_link}")
        print(f"–ù–∞–∑–≤–∞–Ω–∏–µ: {invite_link.name}")
        print(f"–°–æ–∑–¥–∞—Ç–µ–ª—å: {invite_link.creator.full_name}")
        print(f"–û—Å–Ω–æ–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞: {'–î–∞' if invite_link.is_primary else '–ù–µ—Ç'}")
        print(f"{'='*60}\n")
        
        return invite_link.invite_link
        
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏: {e}")
        
        # –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Å—ã–ª–∫—É
        try:
            chat = await bot.get_chat(CHAT_ID)
            if chat.invite_link:
                print(f"\n{'='*60}")
                print(f"üîó –°–£–©–ï–°–¢–í–£–Æ–©–ê–Ø –ü–†–ò–ì–õ–ê–°–ò–¢–ï–õ–¨–ù–ê–Ø –°–°–´–õ–ö–ê:")
                print(f"{'='*60}")
                print(f"–°—Å—ã–ª–∫–∞: {chat.invite_link}")
                print(f"{'='*60}\n")
                return chat.invite_link
            else:
                print("–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.")
        except Exception as e2:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–∞—Ç–µ: {e2}")
    
    finally:
        await bot.session.close()

async def main():
    print("–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏ –¥–ª—è –∫–∞–Ω–∞–ª–∞...")
    invite_link = await create_invite_link()
    
    if invite_link:
        print("‚úÖ –ì–æ—Ç–æ–≤–æ! –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.")
    else:
        print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É.")
        print("\nüìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:")
        print("1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–Ω–∞–ª –≤ Telegram")
        print("2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞")
        print("3. –í—ã–±–µ—Ä–∏—Ç–µ '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–º'")
        print("4. –í —Ä–∞–∑–¥–µ–ª–µ '–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏' —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É")

if __name__ == "__main__":
    asyncio.run(main())